<!DOCTYPE html>
<html>
<head>
  <title>Readme.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/co/Readme.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#co">co</a>
      </div>

      <div class="heading h2">
        <a href="#co-v4">Co v4</a>
      </div>

      <div class="heading h2">
        <a href="#platform-compatibility">Platform Compatibility</a>
      </div>

      <div class="heading h2">
        <a href="#installation">Installation</a>
      </div>

      <div class="heading h2">
        <a href="#associated-libraries">Associated libraries</a>
      </div>

      <div class="heading h2">
        <a href="#examples">Examples</a>
      </div>

      <div class="heading h2">
        <a href="#yieldables">Yieldables</a>
      </div>

      <div class="heading h3">
        <a href="#promises">Promises</a>
      </div>

      <div class="heading h3">
        <a href="#thunks">Thunks</a>
      </div>

      <div class="heading h3">
        <a href="#arrays">Arrays</a>
      </div>

      <div class="heading h3">
        <a href="#objects">Objects</a>
      </div>

      <div class="heading h3">
        <a href="#generators-and-generator-functions">Generators and Generator Functions</a>
      </div>

      <div class="heading h2">
        <a href="#api">API</a>
      </div>

      <div class="heading h3">
        <a href="#co-fn*.then-val-greater">co(fn*).then( val =&amp;gt; )</a>
      </div>

      <div class="heading h3">
        <a href="#var-fn-co.wrap-fn*">var fn = co.wrap(fn*)</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="co">
  <h1>
    <a href="#co" name="co" class="pilcrow"></a>
co
  </h1>
</div>
<p><a href="https://gitter.im/tj/co?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Gitter"></a>
<a href="https://npmjs.org/package/co"><img src="https://img.shields.io/npm/v/co.svg?style=flat-square" alt="NPM version"></a>
<a href="https://travis-ci.org/tj/co"><img src="https://img.shields.io/travis/tj/co.svg?style=flat-square" alt="Build status"></a>
<a href="https://coveralls.io/r/tj/co"><img src="https://img.shields.io/coveralls/tj/co.svg?style=flat-square" alt="Test coverage"></a>
<a href="https://npmjs.org/package/co"><img src="http://img.shields.io/npm/dm/co.svg?style=flat-square" alt="Downloads"></a></p>
<p>Generator based control flow goodness for nodejs and the browser,
using promises, letting you write non-blocking code in a nice-ish way.</p>
<div class="pilwrap" id="co-v4">
  <h2>
    <a href="#co-v4" name="co-v4" class="pilcrow"></a>
Co v4
  </h2>
</div>
<p><code>co@4.0.0</code> has been released, which now relies on promises.
It is a stepping stone towards <a href="https://github.com/lukehoban/ecmascript-asyncawait">ES7 async/await</a>.
The primary API change is how <code>co()</code> is invoked.
Before, <code>co</code> returned a &quot;thunk&quot;, which you then called with a callback and optional arguments.
Now, <code>co()</code> returns a promise.</p>
<pre><code class="js">co(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">return</span> result;
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
  <span class="hljs-built_in">console</span>.log(value);
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
  <span class="hljs-built_in">console</span>.error(err.stack);
});
</code></pre>
<p>If you want to convert a <code>co</code>-generator-function into a regular function that returns a promise,
you now use <code>co.wrap(fn*)</code>.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> fn = co.wrap(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve(val);
});

fn(<span class="hljs-literal">true</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{

});
</code></pre>
<div class="pilwrap" id="platform-compatibility">
  <h2>
    <a href="#platform-compatibility" name="platform-compatibility" class="pilcrow"></a>
Platform Compatibility
  </h2>
</div>
<p><code>co@4+</code> requires a <code>Promise</code> implementation.
For versions of node <code>&lt; 0.11</code> and for many older browsers,
you should/must include your own <code>Promise</code> polyfill.</p>
<p>When using node 0.11.x or greater, you must use the <code>--harmony-generators</code>
flag or just <code>--harmony</code> to get access to generators.</p>
<p>When using node 0.10.x and lower or browsers without generator support,
you must use <a href="https://github.com/TooTallNate/gnode">gnode</a> and/or <a href="http://facebook.github.io/regenerator/">regenerator</a>.</p>
<p>io.js is supported out of the box, you can use <code>co</code> without flags or polyfills.</p>
<div class="pilwrap" id="installation">
  <h2>
    <a href="#installation" name="installation" class="pilcrow"></a>
Installation
  </h2>
</div>
<pre><code>$ npm install co
</code></pre>
<div class="pilwrap" id="associated-libraries">
  <h2>
    <a href="#associated-libraries" name="associated-libraries" class="pilcrow"></a>
Associated libraries
  </h2>
</div>
<p>Any library that returns promises work well with <code>co</code>.</p>
<ul>
<li><a href="https://github.com/normalize/mz">mz</a> - wrap all of node's code libraries as promises.</li>
</ul>
<p>View the <a href="https://github.com/visionmedia/co/wiki">wiki</a> for more libraries.</p>
<div class="pilwrap" id="examples">
  <h2>
    <a href="#examples" name="examples" class="pilcrow"></a>
Examples
  </h2>
</div>
<pre><code class="js"><span class="hljs-keyword">var</span> co = <span class="hljs-built_in">require</span>(<span class="hljs-string">'co'</span>);

co(<span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">// yield any promise</span>
  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">true</span>);
}).catch(onerror);

co(<span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">// resolve multiple promises in parallel</span>
  <span class="hljs-keyword">var</span> a = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">var</span> b = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">var</span> c = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">3</span>);
  <span class="hljs-keyword">var</span> res = <span class="hljs-keyword">yield</span> [a, b, c];
  <span class="hljs-built_in">console</span>.log(res);
  <span class="hljs-comment">// =&gt; [1, 2, 3]</span>
}).catch(onerror);

<span class="hljs-comment">// errors can be try/catched</span>
co(<span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'boom'</span>));
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err.message); <span class="hljs-comment">// "boom"</span>
 }
}).catch(onerror);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onerror</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-comment">// log any uncaught errors</span>
  <span class="hljs-comment">// co will not throw any errors you do not handle!!!</span>
  <span class="hljs-comment">// HANDLE ALL YOUR ERRORS!!!</span>
  <span class="hljs-built_in">console</span>.error(err.stack);
}
</code></pre>
<div class="pilwrap" id="yieldables">
  <h2>
    <a href="#yieldables" name="yieldables" class="pilcrow"></a>
Yieldables
  </h2>
</div>
<p>The <code>yieldable</code> objects currently supported are:</p>
<ul>
<li>promises</li>
<li>thunks (functions)</li>
<li>array (parallel execution)</li>
<li>objects (parallel execution)</li>
<li>generators (delegation)</li>
<li>generator functions (delegation)</li>
</ul>
<p>Nested <code>yieldable</code> objects are supported, meaning you can nest
promises within objects within arrays, and so on!</p>
<div class="pilwrap" id="promises">
  <h3>
    <a href="#promises" name="promises" class="pilcrow"></a>
Promises
  </h3>
</div>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Read more on promises!</a></p>
<div class="pilwrap" id="thunks">
  <h3>
    <a href="#thunks" name="thunks" class="pilcrow"></a>
Thunks
  </h3>
</div>
<p>Thunks are functions that only have a single argument, a callback.
Thunk support only remains for backwards compatibility and may
be removed in future versions of <code>co</code>.</p>
<div class="pilwrap" id="arrays">
  <h3>
    <a href="#arrays" name="arrays" class="pilcrow"></a>
Arrays
  </h3>
</div>
<p><code>yield</code>ing an array will resolve all the <code>yieldables</code> in parallel.</p>
<pre><code class="js">co(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> res = <span class="hljs-keyword">yield</span> [
    <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">1</span>),
    <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">2</span>),
    <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">3</span>),
  ];
  <span class="hljs-built_in">console</span>.log(res); <span class="hljs-comment">// =&gt; [1, 2, 3]</span>
}).catch(onerror);
</code></pre>
<div class="pilwrap" id="objects">
  <h3>
    <a href="#objects" name="objects" class="pilcrow"></a>
Objects
  </h3>
</div>
<p>Just like arrays, objects resolve all <code>yieldable</code>s in parallel.</p>
<pre><code class="js">co(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> res = <span class="hljs-keyword">yield</span> {
    <span class="hljs-number">1</span>: <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">1</span>),
    <span class="hljs-number">2</span>: <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">2</span>),
  };
  <span class="hljs-built_in">console</span>.log(res); <span class="hljs-comment">// =&gt; { 1: 1, 2: 2 }</span>
}).catch(onerror);
</code></pre>
<div class="pilwrap" id="generators-and-generator-functions">
  <h3>
    <a href="#generators-and-generator-functions" name="generators-and-generator-functions" class="pilcrow"></a>
Generators and Generator Functions
  </h3>
</div>
<p>Any generator or generator function you can pass into <code>co</code>
can be yielded as well. This should generally be avoided
as we should be moving towards spec-compliant <code>Promise</code>s instead.</p>
<div class="pilwrap" id="api">
  <h2>
    <a href="#api" name="api" class="pilcrow"></a>
API
  </h2>
</div>
<div class="pilwrap" id="co-fn*.then-val-greater">
  <h3>
    <a href="#co-fn*.then-val-greater" name="co-fn*.then-val-greater" class="pilcrow"></a>
co(fn*).then( val =&gt; )
  </h3>
</div>
<p>Returns a promise that resolves a generator, generator function,
or any function that returns a generator.</p>
<pre><code class="js">co(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">true</span>);
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
  <span class="hljs-built_in">console</span>.log(val);
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
  <span class="hljs-built_in">console</span>.error(err.stack);
});
</code></pre>
<div class="pilwrap" id="var-fn-co.wrap-fn*">
  <h3>
    <a href="#var-fn-co.wrap-fn*" name="var-fn-co.wrap-fn*" class="pilcrow"></a>
var fn = co.wrap(fn*)
  </h3>
</div>
<p>Convert a generator into a regular function that returns a <code>Promise</code>.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> fn = co.wrap(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve(val);
});

fn(<span class="hljs-literal">true</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{

});
</code></pre>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>MIT</p>
</div>
  </div>
</body>
</html>
